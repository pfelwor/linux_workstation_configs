---
# instal aptitude first to be able to update the system
- name: install aptitude
  apt:
    name:
      - aptitude
    state: present
    update_cache: yes
  become: yes
  tags: ['linux_workstation_configs']
  
- name: Upgrade all packages to the latest version
  apt:
    name: "*"
    state: latest
  become: yes
  tags: ['linux_workstation_configs']

# install packages - from default repos and custom repos
- name: install packages
  apt:
    name:
    # packages from default OS-repos
    - openssh-server
    - ansible
    - tmux
    - git
    - gitk
    - gpg
    - keepassx
    - openjdk-8-jdk
    - bash-completion
    - vim
    - vim-common
    - ca-certificates
    - curl
    - apt-transport-https
    - lsb-release
    - gnupg
    - gnupg-agent
    - software-properties-common
    - vpnc
    - nmap
    - guake
    - vagrant
    # packages from custom repos
    - azure-cli
    - docker-ce
    - docker-ce-cli
    - containerd.io
    - docker-compose
    - atom
    - virtualbox-6.1
    state: present
    update_cache: yes
  become: yes
  tags: ['linux_workstation_configs']

- name: install helm binary
  copy:
    # currenty v. 3.0.0-beta.3
    src: binaries/helm
    dest: /usr/local/bin/helm
    mode: '0755'
    owner: root
    group: root
  become: yes
  tags: ['linux_workstation_configs']

- name: install terraform binary
  copy:
    # currenty v. 0.12.9
    src: binaries/terraform
    dest: /usr/local/bin/terraform
    mode: '0755'
    owner: root
    group: root
  become: yes
  tags: ['linux_workstation_configs']

- name: install kubectl binary
  copy:
    # currenty v. 0.16.0
    src: binaries/kubectl
    dest: /usr/local/bin/kubectl
    mode: '0755'
    owner: root
    group: root
  become: yes
  tags: ['linux_workstation_configs']

- name: install kubectx binary
  copy:
    # currenty v. 0.7.0
    src: binaries/kubectx
    dest: /usr/local/bin/kubectx
    mode: '0755'
    owner: root
    group: root
  become: yes
  tags: ['linux_workstation_configs']

- name: install kubens binary
  copy:
    # currenty v. 0.7.0
    src: binaries/kubens
    dest: /usr/local/bin/kubens
    mode: '0755'
    owner: root
    group: root
  become: yes
  tags: ['linux_workstation_configs']

- name: install minikube binary
  copy:
    # currenty v. 1.4.0
    src: binaries/minikube
    dest: /usr/local/bin/minikube
    mode: '0755'
    owner: root
    group: root
  become: yes
  tags: ['linux_workstation_configs']
